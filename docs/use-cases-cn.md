# zhi 使用场景大全

> 本文档通过真实场景演示 zhi CLI 的各种用法，帮助你快速找到适合自己的工作流。

## 目录

- [一、日常办公场景](#一日常办公场景)
  - [1.1 总结会议纪要](#11-总结会议纪要)
  - [1.2 翻译文档](#12-翻译文档)
  - [1.3 生成周报/日报](#13-生成周报日报)
- [二、数据提取与对比](#二数据提取与对比)
  - [2.1 对比两份文档的差异](#21-对比两份文档的差异)
  - [2.2 从财务报表提取关键数据](#22-从财务报表提取关键数据)
  - [2.3 整理客户联系人列表](#23-整理客户联系人列表)
  - [2.4 跨文档信息汇总](#24-跨文档信息汇总)
- [三、内容创作场景](#三内容创作场景)
  - [3.1 文章摘要与改写](#31-文章摘要与改写)
  - [3.2 多语言内容翻译](#32-多语言内容翻译)
  - [3.3 Markdown 格式化输出](#33-markdown-格式化输出)
- [四、数据处理场景](#四数据处理场景)
  - [4.1 PDF/图片 OCR 提取文字](#41-pdf图片-ocr-提取文字)
  - [4.2 CSV/Excel 数据整理](#42-csvexcel-数据整理)
  - [4.3 网页内容抓取与分析](#43-网页内容抓取与分析)
- [五、自定义技能场景](#五自定义技能场景)
  - [5.1 创建合同审查技能](#51-创建合同审查技能)
  - [5.2 创建邮件草稿技能](#52-创建邮件草稿技能)
  - [5.3 创建数据分析技能](#53-创建数据分析技能)

---

## 一、日常办公场景

### 1.1 总结会议纪要

**场景**：产品评审会结束后，你手头有一份冗长的会议记录文本，需要快速整理成重点明确的纪要发给团队。

**操作步骤**：

使用内置的 `summarize` 技能，一行命令即可完成：

```bash
$ zhi run summarize 产品评审会议记录.txt
```

zhi 读取文件内容后，自动生成结构化摘要并保存到 `zhi-output/` 目录：

```
[file_read] 读取: 产品评审会议记录.txt (12.3KB)
[file_write] 写入: 产品评审会议记录-摘要.md (1.8KB)

文件已保存: zhi-output/产品评审会议记录-摘要.md
```

**预期效果**：输出一份 Markdown 格式的会议纪要，包含关键决策、待办事项和负责人。摘要通常是原文的 10%-20%，重点突出，方便分发。

你也可以在交互模式下操作，给出更具体的要求：

```bash
$ zhi
You [approve]: 帮我总结一下这份会议记录，重点提取待办事项和截止日期
```

zhi 会先读取文件，再按你的要求生成针对性更强的摘要。

---

### 1.2 翻译文档

**场景**：收到一份英文技术规格书，需要翻译成中文给团队评审。

**操作步骤**：

使用内置的 `translate` 技能：

```bash
$ zhi run translate api-specification.md
```

默认翻译为简体中文。如果需要翻译为其他语言，在交互模式下指定：

```bash
$ zhi -c "把 项目介绍.md 翻译成英文，保持 Markdown 格式不变"
```

输出示例：

```
[file_read] 读取: api-specification.md (8.5KB)
[file_write] 写入: api-specification-翻译.md (9.2KB)

文件已保存: zhi-output/api-specification-翻译.md
```

**预期效果**：保留原文档结构（标题层级、代码块、列表）的完整中文翻译。技术术语（如 API、JSON、HTTP）保留英文原词。

也支持中译英：

```bash
$ zhi -c "将 产品需求文档.md 翻译成英文"
```

---

### 1.3 生成周报/日报

**场景**：周五下午需要写一份工作周报，手头有这一周的工作日志和 Git 提交记录。

**操作步骤**：

```bash
$ zhi
You [approve]: 根据本周的工作笔记生成一份周报，包含完成事项、进行中事项和下周计划
```

zhi 会请求读取你的工作笔记文件：

```
[file_read] 读取: 本周工作笔记.md (3.2KB)
  → 允许读取此文件? (y/n) y
[file_write] 写入: 周报-2026-02-23.md (1.5KB)
  → 允许创建此文件? (y/n) y

文件已保存: zhi-output/周报-2026-02-23.md
```

**预期效果**：一份格式规范的周报，按"本周完成"、"进行中"、"下周计划"三个板块组织。

如果需要结合 Git 记录，可以用管道传入：

```bash
$ git log --oneline --since="last monday" | zhi -c "根据这些 Git 提交记录生成本周工作总结"
```

---

## 二、数据提取与对比

### 2.1 对比两份文档的差异

**场景**：客户发来了合同的修订版，你需要快速找出两个版本之间的具体变更内容。

**操作步骤**：

使用内置的 `compare` 技能，一行命令即可完成：

```bash
$ zhi run compare 合同-v1.md 合同-v2.md
```

zhi 逐段对比两份文档，输出差异报告：

```
[file_read] 读取: 合同-v1.md (6.2KB)
[file_read] 读取: 合同-v2.md (6.8KB)
[file_write] 写入: 合同-差异对比.md (2.5KB)

文件已保存: zhi-output/合同-差异对比.md
```

输出的差异报告示例：

```markdown
## 合同版本差异对比

### 新增内容
- 第三条增加了"不可抗力"免责条款（第 3.5 节）
- 附件二新增《数据安全协议》

### 删除内容
- 原第五条"试用期条款"已被移除

### 修改内容
| 位置       | 原版本 (v1)                | 修订版 (v2)                |
| ---------- | ------------------------- | ------------------------- |
| 第二条 2.1 | 服务期限：12 个月          | 服务期限：24 个月          |
| 第四条 4.2 | 违约金比例：合同总额的 5%  | 违约金比例：合同总额的 10% |
| 第六条 6.1 | 付款方式：一次性支付       | 付款方式：按季度分期支付    |
```

**预期效果**：清晰列出两份文档之间的新增、删除和修改内容，用表格标注具体位置和变更前后的差异，方便逐项确认。

---

### 2.2 从财务报表提取关键数据

**场景**：收到一份季度财务报告 PDF，需要快速提取收入、利润等关键指标供管理层参考。

**操作步骤**：

```bash
$ zhi -c "读取 季度财务报表.pdf，提取收入、利润、同比增长等关键指标，保存为表格"
```

zhi 通过 OCR 识别 PDF 内容，提取结构化数据：

```
[ocr] 识别: 季度财务报表.pdf (4.5MB)
[file_write] 写入: 财务关键指标.xlsx (3.2KB)

文件已保存: zhi-output/财务关键指标.xlsx
```

提取的数据表格示例：

| 指标           | 本季度          | 上季度          | 同比增长   |
| -------------- | -------------- | -------------- | --------- |
| 营业收入       | ¥12,580,000    | ¥10,230,000    | +22.97%   |
| 净利润         | ¥2,150,000     | ¥1,780,000     | +20.79%   |
| 毛利率         | 38.5%          | 36.2%          | +2.3pp    |
| 运营成本       | ¥7,730,000     | ¥6,527,000     | +18.43%   |
| 应收账款       | ¥3,200,000     | ¥2,850,000     | +12.28%   |

**预期效果**：从 PDF 报表中自动识别并提取关键财务数据，整理成结构化的表格文件，包含同比和环比计算。省去手动抄录数据的繁琐工作。

---

### 2.3 整理客户联系人列表

**场景**：手头有一份混乱的客户联系人 CSV 文件，包含重复记录和格式不统一的数据，需要清洗整理后输出。

**操作步骤**：

```bash
$ zhi -c "读取 客户联系人.csv，去除重复项，按公司名称排序，保存为新的 Excel 文件"
```

zhi 读取文件，自动识别并处理重复项：

```
[file_read] 读取: 客户联系人.csv (8.6KB)
[file_write] 写入: 客户联系人-整理.xlsx (5.1KB)

文件已保存: zhi-output/客户联系人-整理.xlsx
```

处理前后对比：

```
处理结果：
- 原始记录数：156 条
- 去除重复项：23 条（按姓名+手机号判定重复）
- 格式修正：12 条手机号补全区号，8 条邮箱修正大小写
- 最终记录数：133 条，已按公司名称 A-Z 排序
```

整理后的表格示例：

| 公司名称       | 联系人 | 职位     | 手机号         | 邮箱                    |
| -------------- | ------ | -------- | ------------- | ---------------------- |
| 北京创新科技   | 陈明   | 技术总监 | 13800001111   | chenming@bjcx.com      |
| 北京创新科技   | 王丽   | 产品经理 | 13900002222   | wangli@bjcx.com        |
| 广州数据服务   | 李强   | CEO      | 15800003333   | liqiang@gzdata.com     |

**预期效果**：自动去除重复记录，统一数据格式，按指定字段排序后输出为 Excel 文件。原始 CSV 文件不受影响。

---

### 2.4 跨文档信息汇总

**场景**：手头有多份项目进度报告，需要将各项目的关键信息汇总到一份文档中，方便整体把控。

**操作步骤**：

在交互模式下操作，逐一读取并汇总：

```bash
$ zhi
You [approve]: 依次读取 项目A-进度报告.md、项目B-进度报告.md 和 项目C-进度报告.md，\
...  提取各项目的完成进度、风险项和下阶段计划，汇总生成一份整体报告
```

zhi 逐一读取文件并交叉整理：

```
[file_read] 读取: 项目A-进度报告.md (3.5KB)
[file_read] 读取: 项目B-进度报告.md (4.1KB)
[file_read] 读取: 项目C-进度报告.md (2.8KB)
[file_write] 写入: 项目汇总报告.md (3.6KB)

文件已保存: zhi-output/项目汇总报告.md
```

汇总报告示例：

```markdown
## 项目整体进度汇总

### 进度总览
| 项目   | 完成进度 | 状态   | 预计完成日期  |
| ------ | ------- | ------ | ------------ |
| 项目 A | 85%     | 正常   | 2026-03-15   |
| 项目 B | 60%     | 延期   | 2026-04-01   |
| 项目 C | 95%     | 正常   | 2026-02-28   |

### 主要风险项
1. **项目 B**：第三方接口联调延迟，影响支付模块上线
2. **项目 A**：测试环境资源不足，可能影响压测计划

### 下阶段重点
- 项目 A：完成性能测试，准备上线部署
- 项目 B：协调第三方加快接口交付，调整里程碑
- 项目 C：进入验收阶段，准备交付文档
```

**预期效果**：从多份独立报告中提取关键信息，交叉对比后生成结构化的汇总文档，包含进度表格、风险清单和行动计划。

---

## 三、内容创作场景

### 3.1 文章摘要与改写

**场景**：你需要对一篇长文章进行压缩整理，或者调整文风适配不同的发布平台。

**操作步骤**：

生成简短摘要：

```bash
$ zhi run summarize 技术分享文章.md
```

在交互模式下要求改写：

```bash
$ zhi
You [approve]: 读取 技术分享文章.md，用更通俗易懂的语言改写，目标读者是非技术人员
```

```
[file_read] 读取: 技术分享文章.md (6.8KB)
[file_write] 写入: 技术分享-通俗版.md (5.2KB)

文件已保存: zhi-output/技术分享-通俗版.md
```

**预期效果**：在保留核心观点的前提下，调整语言风格和专业术语的使用深度。原始文件不会被修改，改写结果保存为新文件。

---

### 3.2 多语言内容翻译

**场景**：公司产品需要同时发布中文和英文版本的更新日志。

**操作步骤**：

```bash
$ zhi -c "读取 更新日志-v2.5.md，翻译成英文，保持 Markdown 格式和版本号不变"
```

```
[file_read] 读取: 更新日志-v2.5.md (2.1KB)
[file_write] 写入: changelog-v2.5-en.md (2.3KB)

文件已保存: zhi-output/changelog-v2.5-en.md
```

原文示例：

```markdown
## v2.5.0 更新日志

### 新增功能
- 支持暗色模式
- 新增数据导出为 PDF 格式
```

翻译结果：

```markdown
## v2.5.0 Changelog

### New Features
- Added dark mode support
- Added data export to PDF format
```

**预期效果**：翻译准确流畅，格式完全保留。版本号、代码片段、变量名等不被翻译。

---

### 3.3 Markdown 格式化输出

**场景**：需要将零散的笔记整理成结构化的 Markdown 文档。

**操作步骤**：

```bash
$ zhi
You [approve]: 读取 会议笔记-原始.txt，整理成格式规范的 Markdown 文档，添加标题层级和列表
```

```
[file_read] 读取: 会议笔记-原始.txt (1.8KB)
[file_write] 写入: 会议笔记-整理.md (2.0KB)

文件已保存: zhi-output/会议笔记-整理.md
```

**预期效果**：结构清晰的 Markdown 文件，包含正确的标题层级（`#`, `##`, `###`）、有序/无序列表、引用块等元素。可直接粘贴到飞书、Notion 或 GitHub。

---

## 四、数据处理场景

### 4.1 PDF/图片 OCR 提取文字

**场景**：拿到一份扫描版的合同 PDF 或手写会议白板照片，需要将内容转为可编辑的文本。

**操作步骤**：

PDF 文件提取：

```bash
$ zhi -c "用 OCR 识别 合同扫描件.pdf 中的文字，保存为文本文件"
```

```
[ocr] 识别: 合同扫描件.pdf (3.2MB)
[file_write] 写入: 合同内容.txt (8.5KB)

文件已保存: zhi-output/合同内容.txt
```

图片文字识别：

```bash
$ zhi -c "识别 白板照片.jpg 中的文字内容，整理成条目列表"
```

```
[ocr] 识别: 白板照片.jpg (2.1MB)
[file_write] 写入: 白板内容.md (1.2KB)

文件已保存: zhi-output/白板内容.md
```

**预期效果**：从 PDF 或图片中提取文字，并按要求整理格式。支持的格式包括 PDF、PNG、JPG、GIF、WEBP，文件大小上限 20MB。

批量处理多张图片：

```bash
$ zhi
You [approve]: 依次识别 截图1.png 和 截图2.png 的文字内容，合并整理成一个文档
```

---

### 4.2 CSV/Excel 数据整理

**场景**：手头有一份混乱的 CSV 数据，需要清洗整理后输出为 Excel 格式。

**操作步骤**：

```bash
$ zhi
You [approve]: 读取 销售数据-原始.csv，按地区汇总销售额，生成新的 Excel 文件
```

```
[file_read] 读取: 销售数据-原始.csv (15.6KB)
[file_write] 写入: 销售汇总-按地区.xlsx (4.8KB)

文件已保存: zhi-output/销售汇总-按地区.xlsx
```

生成的 Excel 包含汇总表格：

| 地区   | 总销售额    | 订单数 | 平均客单价 |
| ------ | ---------- | ------ | --------- |
| 华东   | 1,250,000  | 320    | 3,906     |
| 华南   | 980,000    | 245    | 4,000     |
| 华北   | 870,000    | 210    | 4,143     |

也支持 CSV 到 CSV 的处理：

```bash
$ zhi -c "读取 用户列表.csv，去除重复项，按注册日期排序，保存为新的 CSV"
```

**预期效果**：数据经过清洗、汇总或转换后保存为指定格式。Excel 文件需要安装 `openpyxl`（`pip install zhicli[all]`），否则自动降级输出为 CSV。

---

### 4.3 网页内容抓取与分析

**场景**：需要从某个网页获取信息并整理成报告。

**操作步骤**：

```bash
$ zhi
You [approve]: 抓取 https://example.com/tech-trends-2026 的内容，提取要点并整理成中文摘要
```

```
[web_fetch] 抓取: https://example.com/tech-trends-2026 (28.5KB)
[file_write] 写入: 技术趋势摘要.md (2.1KB)

文件已保存: zhi-output/技术趋势摘要.md
```

**预期效果**：从网页中提取正文内容，去除广告和导航元素，生成结构化的中文摘要。网页内容上限 50KB，超出部分自动截断。

结合翻译使用：

```bash
$ zhi -c "抓取 https://example.com/release-notes 的内容，翻译成中文并保存"
```

---

## 五、自定义技能场景

zhi 支持通过 YAML 文件定义自定义技能。技能一旦创建，就可以像内置功能一样反复使用。技能使用 `glm-4-flash` 模型执行，成本仅为交互聊天的 10%。

### 5.1 创建合同审查技能

**场景**：法务团队需要一个标准化的合同审查清单，每次收到新合同时执行相同的检查流程，确保关键条款不遗漏。

**操作步骤**：

在交互模式中让 zhi 创建技能：

```bash
$ zhi
You [approve]: 帮我创建一个合同审查技能，要求检查以下方面：\
...  关键条款是否齐全、截止日期条款、责任限制、\
...  终止条件、付款条款
```

zhi 生成技能配置文件：

```
[skill_create] 创建技能: contract-review
  → 允许创建此技能? (y/n) y

技能 'contract-review' 已创建
```

生成的 YAML 文件（`~/.config/zhi/skills/contract-review.yaml`）：

```yaml
name: contract-review
description: 按标准清单审查合同关键条款
model: glm-4-flash
system_prompt: |
  你是一位专业的合同审查助手。按以下清单逐项检查合同内容：
  1. 关键条款完整性：合同主体、标的物、数量、质量标准是否明确
  2. 截止日期条款：履行期限、交付日期、验收期限是否合理且明确
  3. 责任限制：赔偿上限、免责条款、不可抗力条款是否存在
  4. 终止条件：合同解除条件、提前终止通知期限、违约后果
  5. 付款条款：付款方式、付款节点、发票要求、逾期利息
  对每个检查项给出"通过/缺失/需注意"的判定，并附上具体建议。
  最终生成一份结构化的审查报告。
tools:
  - file_read
  - file_write
max_turns: 10
```

使用该技能：

```bash
$ zhi run contract-review 供应商服务合同.md
```

输出示例：

```
[file_read] 读取: 供应商服务合同.md (8.2KB)
[file_write] 写入: 合同审查报告.md (3.1KB)

文件已保存: zhi-output/合同审查报告.md

## 合同审查报告

| 检查项         | 状态     | 说明                                     |
| -------------- | -------- | ---------------------------------------- |
| 关键条款完整性 | ✓ 通过   | 合同主体、标的物、质量标准均已明确        |
| 截止日期条款   | ⚠ 需注意 | 验收期限未明确，建议补充具体天数          |
| 责任限制       | ✗ 缺失   | 未设定赔偿上限，建议增加不超过合同总额条款 |
| 终止条件       | ✓ 通过   | 提前终止需 30 天书面通知                  |
| 付款条款       | ⚠ 需注意 | 未约定逾期付款利息，建议补充              |
```

**预期效果**：每份合同都经过统一标准的审查，输出格式一致的审查报告。法务团队成员可快速定位需要补充或修改的条款。

---

### 5.2 创建邮件草稿技能

**场景**：每天需要发送多封格式类似的工作邮件，希望自动生成草稿。

**操作步骤**：

```bash
$ zhi
You [approve]: 创建一个邮件草稿技能，能根据简要描述生成正式的工作邮件，包含称呼、正文和结尾
```

```
[skill_create] 创建技能: email-draft
  → 允许创建此技能? (y/n) y

技能 'email-draft' 已创建
```

生成的 YAML：

```yaml
name: email-draft
description: 根据简要描述生成正式工作邮件草稿
model: glm-4-flash
system_prompt: |
  你是一位专业的商务邮件撰写助手。根据用户提供的要点生成完整邮件：
  - 使用恰当的称呼（尊敬的/亲爱的 + 对方称谓）
  - 正文条理清晰，语气正式但不生硬
  - 包含礼貌的结尾语
  - 如涉及时间节点，明确标注日期
  将邮件保存为 .txt 文件。
tools:
  - file_write
max_turns: 5
```

使用示例：

```bash
$ zhi -c "用 email-draft 技能写一封邮件：告知客户王总项目验收时间推迟到下周三"
```

**预期效果**：一键生成格式规范的邮件草稿，可直接复制粘贴到邮件客户端。

---

### 5.3 创建数据分析技能

**场景**：每月需要对销售数据做固定格式的分析报告。

**操作步骤**：

```bash
$ zhi
You [approve]: 创建一个月度数据分析技能，功能包括：读取 CSV 数据、\
...  计算环比增长、按维度汇总、生成 Markdown 报告和 Excel 汇总表
```

```
[skill_create] 创建技能: monthly-report
  → 允许创建此技能? (y/n) y

技能 'monthly-report' 已创建
```

生成的 YAML：

```yaml
name: monthly-report
description: 读取销售 CSV 数据并生成月度分析报告
model: glm-4-flash
system_prompt: |
  你是一位数据分析师。对提供的销售数据执行以下分析：
  1. 计算本月总销售额及环比变化
  2. 按产品类别和地区维度分别汇总
  3. 找出 Top 5 畅销产品和增长最快的品类
  4. 生成一份 Markdown 分析报告（含数据表格）
  5. 同时生成一份 Excel 汇总表
  所有数值保留两位小数，金额使用人民币符号。
tools:
  - file_read
  - file_write
max_turns: 10
```

使用该技能：

```bash
$ zhi run monthly-report 2026年1月销售数据.csv
```

输出：

```
[file_read] 读取: 2026年1月销售数据.csv (25.6KB)
[file_write] 写入: 月度分析报告-2026-01.md (3.8KB)
[file_write] 写入: 月度汇总表-2026-01.xlsx (5.2KB)

文件已保存:
  zhi-output/月度分析报告-2026-01.md
  zhi-output/月度汇总表-2026-01.xlsx
```

**预期效果**：每月只需一行命令，即可生成完整的分析报告和 Excel 数据表。报告格式固定、口径统一，适合直接提交给管理层。

---

## 附录：常用命令速查

| 操作 | 命令 |
| --- | --- |
| 启动交互模式 | `zhi` |
| 单次提问 | `zhi -c "你的问题"` |
| 管道输入 | `cat 文件.txt \| zhi -c "总结这段内容"` |
| 运行技能 | `zhi run <技能名> [文件...]` |
| 首次配置 | `zhi --setup` |
| 查看版本 | `zhi --version` |
| 调试模式 | `zhi --debug` |

### 交互模式下的斜杠命令

| 命令 | 说明 |
| --- | --- |
| `/help` | 查看帮助信息 |
| `/model glm-5` | 切换到 GLM-5 模型（更智能、更贵） |
| `/model glm-4-flash` | 切换到 GLM-4-flash（更快、更便宜） |
| `/auto` | 自动模式（跳过工具确认弹窗） |
| `/approve` | 审批模式（默认，每次工具调用都需确认） |
| `/think` | 开启思考模式（仅 GLM-5 支持） |
| `/fast` | 关闭思考模式 |
| `/run <技能> [文件]` | 在交互模式内运行技能 |
| `/skill list` | 列出已安装的技能 |
| `/skill new` | 创建新技能 |
| `/reset` | 清空对话历史 |
| `/undo` | 撤销最近一轮对话 |
| `/usage` | 查看当前会话的 Token 用量 |
| `/exit` | 退出 zhi |

### 安全提示

- **所有文件写入**都保存到 `zhi-output/` 目录，不会修改你的原始文件
- **Shell 命令**每次执行前都需要手动确认（即使在 `/auto` 模式下）
- **危险命令**（`rm`、`mv` 等）会显示额外警告
- **灾难性命令**（`rm -rf /` 等）被完全禁止执行
- **OCR 文件**大小上限 20MB
- **技能名称**只允许字母、数字、连字符和下划线
